<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2a7ae2" />
  <link rel="manifest" href="manifest.json">
  <title>SGPA + CGPA Calculator</title>
  <style>
    :root {
      --bg-color: #f4f7fa;
      --text-color: #333;
      --card-color: white;
      --accent: #2a7ae2;
      --table-header: #2a7ae2;
    }

    body.dark-mode {
      --bg-color: #121212;
      --text-color: #eee;
      --card-color: #1e1e1e;
      --accent: #4a90e2;
      --table-header: #333;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      padding: 30px;
      margin: 0;
    }

    h1 {
      text-align: center;
      color: var(--accent);
    }

    .calculator {
      background: var(--card-color);
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      max-width: 900px;
      margin: 20px auto;
    }

    .row, .semester {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 10px;
      align-items: center;
    }

    input,
    select {
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    input.subject-name {
      flex: 2;
    }

    input.credit, input.sgpa, input.total-credit {
      flex: 1;
    }

    select.grade {
      flex: 1;
    }

    button {
      padding: 10px 16px;
      font-size: 14px;
      border-radius: 8px;
      border: none;
      background: var(--accent);
      color: white;
      cursor: pointer;
      transition: background 0.3s;
      margin-bottom: 10px;
    }

    button:hover {
      filter: brightness(0.9);
    }

    .delete-btn {
      background: #e74c3c;
    }

    .delete-btn:hover {
      background: #c0392b;
    }

    #result {
      background: var(--card-color);
      padding: 15px;
      margin-top: 20px;
      border-radius: 8px;
      font-size: 16px;
    }

    .toggle-btn {
      display: block;
      margin: 0 auto 20px auto;
      background: #444;
      color: white;
      padding: 10px 16px;
      border-radius: 8px;
      text-align: center;
      width: fit-content;
    }

    @media (max-width: 768px) {
      .row, .semester {
        display: block;
      }

      .row > *, .semester > *, button {
        width: 100% !important;
        margin-bottom: 10px;
      }

      .toggle-btn {
        width: 100%;
        margin: 10px 0;
      }

      .calculator {
        padding: 15px;
      }
    }
  </style>
</head>

<body>
  <button class="toggle-btn" onclick="toggleDarkMode()">ğŸŒ“ Toggle Dark Mode</button>
  <h1>ğŸ“ SGPA + CGPA Calculator</h1>

  <div class="calculator">
    <h3>ğŸ¯ SGPA Calculator</h3>
    <div id="subjectInputs">
      <div class="row">
        <input type="text" placeholder="ğŸ“˜ Subject Name" class="subject-name" />
        <input type="number" placeholder="Credit" class="credit" />
        <select class="grade">
          <option value="">Select Grade</option>
          <option value="10">A+</option>
          <option value="9">A</option>
          <option value="8">B+</option>
          <option value="7">B</option>
          <option value="6">C+</option>
          <option value="5">C</option>
          <option value="4">D</option>
          <option value="0">E/F/I</option>
        </select>
        <button class="delete-btn" onclick="removeRow(this)">ğŸ—‘ï¸</button>
      </div>
    </div>
    <button onclick="addRow()">+ Add Subject</button>
    <button onclick="calculateSGPA()">Calculate SGPA</button>
    <div id="sgpaResult"></div>

    <hr>
    <h3>ğŸ“Š CGPA Calculator</h3>
    <div id="cgpaInputs">
      <div class="semester">
        <input type="number" placeholder="SGPA" class="sgpa" />
        <input type="number" placeholder="Total Credits" class="total-credit" />
        <button class="delete-btn" onclick="removeRow(this)">ğŸ—‘ï¸</button>
      </div>
    </div>
    <button onclick="addSemester()">+ Add Semester</button>
    <button onclick="calculateCGPA()">Calculate CGPA</button>
    <div id="cgpaResult"></div>
  </div>

  <script>
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }

    function addRow() {
      const row = document.createElement('div');
      row.className = 'row';
      row.innerHTML = `
        <input type="text" placeholder="ğŸ“˜ Subject Name" class="subject-name" />
        <input type="number" placeholder="Credit" class="credit" />
        <select class="grade">
          <option value="">Select Grade</option>
          <option value="10">A+</option>
          <option value="9">A</option>
          <option value="8">B+</option>
          <option value="7">B</option>
          <option value="6">C+</option>
          <option value="5">C</option>
          <option value="4">D</option>
          <option value="0">E/F/I</option>
        </select>
        <button class="delete-btn" onclick="removeRow(this)">ğŸ—‘ï¸</button>`;
      document.getElementById('subjectInputs').appendChild(row);
    }

    function addSemester() {
      const sem = document.createElement('div');
      sem.className = 'semester';
      sem.innerHTML = `
        <input type="number" placeholder="SGPA" class="sgpa" />
        <input type="number" placeholder="Total Credits" class="total-credit" />
        <button class="delete-btn" onclick="removeRow(this)">ğŸ—‘ï¸</button>`;
      document.getElementById('cgpaInputs').appendChild(sem);
    }

    function removeRow(btn) {
      btn.parentElement.remove();
    }

    function calculateSGPA() {
      const grades = document.querySelectorAll('.grade');
      const credits = document.querySelectorAll('.credit');

      let totalPoints = 0, totalCredits = 0;

      for (let i = 0; i < grades.length; i++) {
        const gp = parseFloat(grades[i].value);
        const cr = parseFloat(credits[i].value);
        if (!isNaN(gp) && !isNaN(cr)) {
          totalPoints += gp * cr;
          totalCredits += cr;
        }
      }

      const result = document.getElementById('sgpaResult');
      if (totalCredits === 0) {
        result.innerHTML = '<p>Please enter valid subject data.</p>';
      } else {
        const sgpa = totalPoints / totalCredits;
        result.innerHTML = `<h3>ğŸ¯ SGPA: ${sgpa.toFixed(2)}</h3>`;
      }
    }

    function calculateCGPA() {
      const sgpas = document.querySelectorAll('.sgpa');
      const credits = document.querySelectorAll('.total-credit');

      let totalPoints = 0, totalCredits = 0;

      for (let i = 0; i < sgpas.length; i++) {
        const sg = parseFloat(sgpas[i].value);
        const cr = parseFloat(credits[i].value);
        if (!isNaN(sg) && !isNaN(cr)) {
          totalPoints += sg * cr;
          totalCredits += cr;
        }
      }

      const result = document.getElementById('cgpaResult');
      if (totalCredits === 0) {
        result.innerHTML = '<p>Please enter valid semester data.</p>';
      } else {
        const cgpa = totalPoints / totalCredits;
        result.innerHTML = `<h3>ğŸ“Š CGPA: ${cgpa.toFixed(2)}</h3>`;
      }
    }

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(reg => console.log('Service Worker registered', reg))
          .catch(err => console.error('SW registration failed', err));
      });
    }
  </script>
</body>

</html>
